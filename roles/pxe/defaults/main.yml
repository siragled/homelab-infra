---
# DHCP Configuration
dhcp_subnets:
  - subnet: "192.168.1.0/24"
    range_start: "192.168.1.100"
    range_end: "192.168.1.200"
    gateway: "192.168.1.1"
    dns_servers: ["8.8.8.8", "1.1.1.1"]
    domain: "homelab.local"

# PXE Server Settings
pxe_next_server: "{{ ansible_default_ipv4.address }}"
tftp_root: "/srv/tftp"
pxe_http_root: "/var/www/pxe"
pxe_http_port: 80

# iPXE Configuration
ipxe_timeout: 5000
default_boot_option: "ubuntu2204"
ipxe_bootfile_bios: "netboot.xyz.kpxe"
ipxe_bootfile_uefi_x86: "netboot.xyz.efi"
ipxe_bootfile_uefi_arm: "netboot.xyz.efi"

# TFTP Configuration
tftp_root: "/srv/tftp"
tftp_enabled: true

# Netboot binaries
netboot_binaries:
  - name: "netboot.xyz.kpxe"
    url: "https://boot.netboot.xyz/ipxe/netboot.xyz.kpxe"
    description: "Legacy BIOS netboot.xyz"
  - name: "netboot.xyz.efi" 
    url: "https://boot.netboot.xyz/ipxe/netboot.xyz.efi"
    description: "UEFI x86_64/ARM64 netboot.xyz"

# Boot files to deploy
boot_files:
  - name: "grubx64.efi"
    arch: "x86_64"
    path: "grub"
  - name: "grubaa64.efi" 
    arch: "arm64"
    path: "grub"
  - name: "memtest86plus.bin"
    arch: "x86_64"
    path: "memtest"


# Ubuntu Versions
ubuntu_versions:
  - version: "22.04"
    codename: "jammy"
    arch: ["amd64", "arm64"]

# Preseed Configuration
preseed_users:
  - name: "ubuntu"
    fullname: "Ubuntu User"
    password_hash: "$6$rounds=4096$..."
    ssh_keys: []

# Callback API
callback_enabled: true
callback_port: 5000
callback_secret: "{{ vault_callback_secret }}"
